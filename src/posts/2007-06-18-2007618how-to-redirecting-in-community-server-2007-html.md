---
path: "/2007/06/18/2007618how-to-redirecting-in-community-server-2007-html/" 
date: "2007-06-18T04:23:00+00:00" 
title: 'How To: Redirecting in Community Server 2007'
tags:
  - communityserver

---
When I updated this site to <a href="http://www.communityserver.org">CS2007</a>, some of the pages broke. The two problems came up due to older configurations of this site. First, in a very old config, I had my RSS feed at /RSS/default.aspx. The other problem came about because I used to have the blog page at the root and now I have gone back to the default way of doing things. So let me show you how I solved both issues.

First the part about redirecting RSS/default.aspx. Actually this has nothing to do with Community Server. I simply went to my hosting provider&#8217;s control panel site and created a virtual directory that pointed to the RSS feed, which is now hosted at Feedburner.

OK, that was easy. Redirecting the requests to blog pages at the root to now go to /blogs/technovangelist was a bit tougher. There were actually two main problems here: How do I redirect rss.aspx in the root of the site, and how do I redirect all of the calls to the archive blog postings that were under /archive to /blogs/technovangelist/archive.

The first of those two happened to be fairly easy. I simply created an rss.aspx page in the root with the following content:

<pre>&lt;script runat=<span style="color: maroon">"server"</span>&gt;<br /><span style="color: blue">private</span> <span style="color: blue">void</span> Page_Load(<span style="color: blue">object</span> sender, System.EventArgs e)<br />{<br />Response.StatusCode = <span style="color: maroon">301</span>;<br />Response.Status = <span style="color: maroon">"301 Moved Permanently"</span>;<br />Response.RedirectLocation=<span style="color: maroon">"http://feeds.feedburner.com/Technovangelist"</span>;<br />Response.End();<br />}<br /></pre>

Actually, it was a bit simpler than that. The actual process was search the net to find <a href="http://www.hanselman.com/blog/PermanentRedirectsWithHTTP301.aspx">Hansleman&#8217;s entry on solving the problem</a>.



To solve the problem with the archive pages I got to take advantage of the new SiteUrls_Override.config file. Here is my config file with some of the non relevant lines removed:

<pre><span style="color: blue"><span style="color: maroon">xml</span> <span style="color: red">version</span>="<span style="color: blue">1.0</span>" <span style="color: red">encoding</span>="<span style="color: blue">utf-8</span>" <span style="color: blue">?&gt;</span><br /><span style="color: blue">&lt;</span><span style="color: maroon">Overrides</span><span style="color: blue">&gt;</span><br />  <span style="color: blue">&lt;</span><span style="color: maroon">Override</span> <span style="color: red">xpath</span>="<span style="color: blue">/SiteUrls/locations</span>" <span style="color: red">mode</span>="<span style="color: blue">add</span>"<span style="color: blue">&gt;</span><br />    <span style="color: blue">&lt;</span><span style="color: maroon">location</span> <span style="color: red">name</span>="<span style="color: blue">OldBlogPathRedirect</span>" <span style="color: red">themeDir</span>="<span style="color: blue">blogs</span>"  <span style="color: red">path</span>="<span style="color: blue">/</span>" <br /><span style="color: red">type</span>="<span style="color: blue">CommunityServer.Blogs.Components.BlogLocation, CommunityServer.Blogs</span>" <span style="color: blue">&gt;</span><br />      <span style="color: blue">&lt;</span><span style="color: maroon">url</span> <span style="color: red">name </span>= "<span style="color: blue">Oldweblogday</span>"    <br /><span style="color: red">path</span>="<span style="color: blue">/blogs/technovangelist/archive/{1}/{2}/{3}.aspx</span>" <br /><span style="color: red">pattern</span>="<span style="color: blue">archive/(d{4})/(d{1,2})/(d{1,2}).aspx</span>" <br /><span style="color: red">physicalPath</span>="<span style="color: blue">##blogthemeDir##</span>"  <br /><span style="color: red">vanity="{2}?App=${{app}}&y=$1&m=$2&d</span>=$3" <span style="color: red">page</span>="<span style="color: blue">postlist.aspx</span>" /<span style="color: blue">&gt;</span><br />      <span style="color: blue">&lt;</span><span style="color: maroon">url</span> <span style="color: red">name </span>= "<span style="color: blue">Oldweblogmonth</span>"  <br /><span style="color: red">path</span>="<span style="color: blue">/blogs/technovangelist/archive/{1}/{2}.aspx</span>"     <br /><span style="color: red">pattern</span>="<span style="color: blue">archive/(d{4})/(d{1,2}).aspx</span>" <br /><span style="color: red">physicalPath</span>="<span style="color: blue">##blogthemeDir##</span>" <br /><span style="color: red">vanity="{2}?App=${{app}}&y=$1&m=$2&d</span>=1" <span style="color: red">page</span>="<span style="color: blue">postlist.aspx</span>" /<span style="color: blue">&gt;</span><br />      <span style="color: blue">&lt;</span><span style="color: maroon">url</span> <span style="color: red">name </span>= "<span style="color: blue">OldweblogpostId</span>"  <br /><span style="color: red">path</span>="<span style="color: blue">/blogs/technovangelist/archive/{1}/{2}/{3}/{4}.aspx</span>" <br /><span style="color: red">pattern</span>="<span style="color: blue">archive/(d{4})/(d{1,2})/(d{1,2})/(d+).aspx</span>" <br /><span style="color: red">physicalPath</span>="<span style="color: blue">##blogthemeDir##</span>" <br /><span style="color: red">vanity="{2}?App=${{app}}&y=$1&m=$2&d=$3&PostID</span>=$4" <br /><span style="color: red">page</span>="<span style="color: blue">post.aspx</span>" /<span style="color: blue">&gt;</span><br />      <span style="color: blue">&lt;</span><span style="color: maroon">url</span> <span style="color: red">name </span>= "<span style="color: blue">OldweblogpostName</span>"  <br /><span style="color: red">path</span>="<span style="color: blue">/blogs/technovangelist/archive/{1}/{2}/{3}/{4}.aspx</span>" <br /><span style="color: red">pattern</span>="<span style="color: blue">archive/(d{4})/(d{1,2})/(d{1,2})/([a-zA-Z0-9-._]*?).aspx</span>" <br /><span style="color: red">physicalPath</span>="<span style="color: blue">##blogthemeDir##</span>" <br /><span style="color: red">vanity="{2}?App=Technovangelist&y=$1&m=$2&d=$3&PostName</span>=$4" <br /><span style="color: red">page</span>="<span style="color: blue">post.aspx</span>" /<span style="color: blue">&gt;</span><br />      <span style="color: blue">&lt;</span><span style="color: maroon">url</span> <span style="color: red">name </span>= "<span style="color: blue">Oldweblogpostcategory</span>"  <br /><span style="color: red">path</span>="<span style="color: blue">/blogs/technovangelist/archive/category/{1}.aspx</span>" <br /><span style="color: red">pattern</span>="<span style="color: blue">archive/category/(d+).aspx</span>" <br /><span style="color: red">physicalPath</span>="<span style="color: blue">##blogthemeDir##</span>" <br /><span style="color: red">vanity="{2}?App=${{app}}&CT=BlogPost&CategoryID</span>=$1" <br /><span style="color: red">page</span>="<span style="color: blue">postlist.aspx</span>" /<span style="color: blue">&gt;</span><br />      <span style="color: blue">&lt;</span><span style="color: maroon">url</span> <span style="color: red">name </span>= "<span style="color: blue">Oldweblogarticlecategory</span>"  <br /><span style="color: red">path</span>="<span style="color: blue">/blogs/technovangelist/articles/category/{1}.aspx</span>" <br /><span style="color: red">pattern</span>="<span style="color: blue">articles/category/(d+).aspx</span>" <br /><span style="color: red">physicalPath</span>="<span style="color: blue">##blogthemeDir##</span>" <br /><span style="color: red">vanity="{2}?App=${{app}}&CT=BlogArticle&CategoryID</span>=$1" <br /><span style="color: red">page</span>="<span style="color: blue">postlist.aspx</span>" /<span style="color: blue">&gt;</span><br />    <span style="color: blue">&lt;</span>/<span style="color: maroon">location</span><span style="color: blue">&gt;</span><br />  <span style="color: blue">&lt;</span>/<span style="color: maroon">Override</span><span style="color: blue">&gt;</span><br /><span style="color: blue">&lt;</span>/<span style="color: maroon">Overrides</span><span style="color: blue">&gt;</span><br /><span style="color: #181818;font-size: small"><span><span style="color: #0000ff;font-size: x-small"><span><br /></span></span></span></span></span></pre>

As you you may be able to see, I just copied the lines from the SiteUrls.config file, then modified a few of the values. I am sure there is a more elegant way to do it, but this worked. If you know of a better way to handle this, please let me know.
